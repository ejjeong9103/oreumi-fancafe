<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>글쓰기</title>
  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
  <link rel="stylesheet" th:href="@{/css/reset.css}">
  <link rel="stylesheet" th:href="@{/css/postEditor.css}">
</head>
<body>
<main class="main-content">
  <div class="container">
    <form action="/board" method="post" th:object="${request}">
      <div class="main-container1">
        <div class="dropdown">
          <button id="boardTypeBtn" class="dropdown-btn btn btn-secondary" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            게시판 선택
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#" onclick="setBoardType(1, '등업게시판'); return false;">등업게시판</a></li>
            <li><a class="dropdown-item" href="#" onclick="setBoardType(2, '자유게시판'); return false;">자유게시판</a></li>
            <li><a class="dropdown-item" href="#" onclick="setBoardType(3, '정모게시판'); return false;">정모게시판</a></li>
          </ul>
        </div>
        <input type="hidden" th:field="*{boardType}" id="boardType" />
        <div class="dropdown" id="categoryDropdown" style="display: none;">
          <button id="categoryBtn" class="dropdown-btn btn btn-secondary" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            말머리 선택
          </button>
          <ul class="dropdown-menu" id="categoryOptions">
            <!-- JavaScript에서 동적으로 옵션을 추가합니다 -->
          </ul>
        </div>
        <input type="hidden" th:field="*{boardCategoryName}" id="boardCategoryName" />
      </div>

      <div class="title-div">
        <label for="title" class="form-label"></label>
        <input type="text" class="form-control" th:field="*{title}" id="title" placeholder="제목을 입력하세요.">
      </div>
      <label for="content"></label>
      <textarea id="content" th:field="*{content}"
                placeholder="권리침해, 욕설, 비하, 명예훼손, 혐오, 불법촬영물 등의 내용을 게시하면 운영정책 및 관련 법률에 의해 제재될 수 있습니다."></textarea>
      <div class="btn-div">
        <button type="submit" class="btn btn-success">글등록</button>
      </div>
    </form>

  </div>
</main>

<script>
  function setBoardType(type, boardName) {
    const boardTypeInput = document.getElementById("boardType");
    const boardTypeBtn = document.getElementById("boardTypeBtn"); // 버튼 요소 선택
    const categoryDropdown = document.getElementById("categoryDropdown");
    const categoryOptions = document.getElementById("categoryOptions");

    // hidden 필드에 선택한 boardType 값을 설정
    boardTypeInput.value = type;

    // 버튼 텍스트를 선택한 게시판 이름으로 변경
    boardTypeBtn.textContent = boardName;

    console.log("Board Type set to:", type, "Board Name:", boardName); // 디버그용 콘솔 출력

    // boardType에 따라 말머리 선택 옵션을 변경
    if (type === 1) {
      categoryDropdown.style.display = "block";
      categoryOptions.innerHTML = `
        <li><a class="dropdown-item" href="#" onclick="setCategory('정회원신청'); return false;">정회원신청</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('우수회원신청'); return false;">우수회원신청</a></li>
      `;
    } else if (type === 3) {
      categoryDropdown.style.display = "block";
      categoryOptions.innerHTML = `
        <li><a class="dropdown-item" href="#" onclick="setCategory('서울'); return false;">서울</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('경기'); return false;">경기</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('인천'); return false;">인천</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('강원'); return false;">강원</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('충북'); return false;">충북</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('충남'); return false;">충남</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('대전'); return false;">대전</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('전북'); return false;">전북</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('전남'); return false;">전남</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('광주'); return false;">광주</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('경북'); return false;">경북</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('경남'); return false;">경남</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('대구'); return false;">대구</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('부산'); return false;">부산</a></li>
        <li><a class="dropdown-item" href="#" onclick="setCategory('제주'); return false;">제주</a></li>
      `;
    } else {
      categoryDropdown.style.display = "none";
    }
  }

  function setCategory(category) {
    const boardCategoryNameInput = document.getElementById("boardCategoryName");
    boardCategoryNameInput.value = category; // 선택된 category를 hidden 필드에 설정
    document.getElementById("categoryBtn").textContent = category; // 버튼 텍스트도 변경
    console.log("Board Category set to:", category);
  }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
